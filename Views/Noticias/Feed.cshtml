@{
    ViewBag.Title = "FeedView";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Feed de Notícias</h2>

<div id="feed-noticias" class="feed-noticias"></div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        fetch('/Noticias/ListarNoticias')
            .then(response => response.json())
            .then(noticias => {
                const feedContainer = document.getElementById('feed-noticias');
                noticias.forEach(noticia => {
                    const noticiaElement = document.createElement('div');
                    noticiaElement.classList.add('noticia-resumo', 'mb-4');

                    noticiaElement.innerHTML = `
                        <h3>${noticia.Titulo}</h3>
                        <img src="${noticia.ImagemPrincipal}" alt="Imagem de ${noticia.Titulo}" class="img-fluid" style="max-width: 100%; height: auto;" />
                        <p>
                            ${noticia.Conteudo.substring(0, 100)}...
                            <a href="/Noticias/Detalhes/${noticia.Id}">Leia mais</a>
                        </p>
                    `;
                    feedContainer.appendChild(noticiaElement);
                });
            })
            .catch(error => console.error('Erro ao carregar o feed de notícias:', error));
    });
</script>
